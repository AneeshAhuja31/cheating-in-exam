#include <iostream>
#include <iomanip>
using namespace std;

int main()
{
    int processes[] = {1, 2, 3, 4, 5};
    int arrival[] = {0, 1, 2, 3, 4};
    int burst[] = {4, 3, 5, 2, 4};
    int priority[] = {2, 1, 4, 3, 5};
    int n = 5;

    int completed = 0, currentTime = 0;
    bool done[5] = {false};
    int waiting[5] = {0}, turnaround[5] = {0}, completion[5] = {0}, response[5] = {0};

    while (completed < n)
    {
        int idx = -1;
        int highestPriority = 1e9;

        for (int i = 0; i < n; i++)
        {
            if (arrival[i] <= currentTime && !done[i])
            {
                if (priority[i] < highestPriority)
                {
                    highestPriority = priority[i];
                    idx = i;
                }
            }
        }

        if (idx == -1)
        {
            currentTime++;
        }
        else
        {
            response[idx] = currentTime - arrival[idx]; // response time = start - arrival
            currentTime += burst[idx];
            completion[idx] = currentTime;
            turnaround[idx] = completion[idx] - arrival[idx];
            waiting[idx] = turnaround[idx] - burst[idx];
            done[idx] = true;
            completed++;
        }
    }

    int totalWaiting = 0, totalTurnaround = 0;

    // Print table header
    cout << "+---------+--------------+------------+-----------+----------------+----------------+-------------+---------------+\n";
    cout << "| Process | Arrival Time | Burst Time | Priority  | Completion Time| Turnaround Time| Waiting Time| Response Time |\n";
    cout << "+---------+--------------+------------+-----------+----------------+----------------+-------------+---------------+\n";

    // Print process details
    for (int i = 0; i < n; i++)
    {
        cout << "| " << setw(7) << processes[i]
                << " | " << setw(12) << arrival[i]
                << " | " << setw(10) << burst[i]
                << " | " << setw(9) << priority[i]
                << " | " << setw(14) << completion[i]
                << " | " << setw(14) << turnaround[i]
                << " | " << setw(11) << waiting[i]
                << " | " << setw(13) << response[i] << " |\n";

        totalWaiting += waiting[i];
        totalTurnaround += turnaround[i];
    }

    cout << "+---------+--------------+------------+-----------+----------------+----------------+-------------+---------------+\n";

    cout << "\nTotal Waiting Time: " << totalWaiting << endl;
    cout << "Total Turnaround Time: " << totalTurnaround << endl;
    cout << "Average Waiting Time: " << fixed << (double)totalWaiting / n << endl;
    cout << "Average Turnaround Time: " << fixed << (double)totalTurnaround / n << endl;

    return 0;
}
    