#include <iostream>
    using namespace std;
    
    int main() {
        int n = 5; // Number of processes
        int r = 3; // Number of resources
    
        int alloc[5][3] = { {0, 0, 1},   // P0 - Allocation Matrix
                            {3, 0, 0},   // P1
                            {1, 0, 1},   // P2
                            {2, 3, 2},   // P3
                            {0, 0, 3} }; // P4
    
        int maxm[5][3] = { {7, 6, 3},   // P0 - MAX Matrix
                           {3, 2, 2},   // P1
                           {8, 0, 2},   // P2
                           {2, 1, 2},   // P3
                           {5, 2, 3} }; // P4
    
        int avail[3] = {2, 3, 2}; // Available resources
    
        int f[5] = {0}; // Finish flag for processes
        int ans[5];     // To store safe sequence
        int ind = 0;
        int need[5][3];
    
        // Calculate Need Matrix
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < r; j++) {
                need[i][j] = maxm[i][j] - alloc[i][j];
            }
        }
    
        // Find the safe sequence
        for (int k = 0; k < n; k++) {
            for (int i = 0; i < n; i++) {
                if (f[i] == 0) {
                    int flag = 0;
                    for (int j = 0; j < r; j++) {
                        if (need[i][j] > avail[j]) {
                            flag = 1;
                            break;
                        }
                    }
    
                    if (flag == 0) {
                        ans[ind++] = i;
                        for (int y = 0; y < r; y++) {
                            avail[y] += alloc[i][y];
                        }
                        f[i] = 1;
                    }
                }
            }
        }
    
        // Display the Safe Sequence
        cout << "The SAFE Sequence is as follows\n";
        for (int i = 0; i < n - 1; i++) {
            cout << " P" << ans[i] << " ->";
        }
        cout << " P" << ans[n - 1] << endl;
    
        return 0;
    }
    